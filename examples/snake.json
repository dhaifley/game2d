{
  "debug": null,
  "pause": null,
  "public": false,
  "w": 640,
  "h": 480,
  "id": "df66711e-cefd-491f-b41a-a2df8dd1e53c",
  "previous_id": "79ab2ceb-1f44-4acd-b3e1-abe903bf9024",
  "name": "Snake",
  "version": null,
  "description": "Classic Snake game. Use arrow keys or WASD to control the snake. Eat the red food to grow longer. Don't hit the walls or yourself! Press SPACE to start a new game.",
  "icon": "PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCIgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0Ij4KICA8cmVjdCB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIGZpbGw9IiMwMDFhMDAiIHJ4PSI4IiByeT0iOCIvPgogIDxwYXRoIGZpbGw9IiMwMGZmMDAiIGQ9Ik0gMTIsMTYgSCAyOCBWIDI0IEggMzYgViAzMiBIIDQ0IFYgNDAgSCA1MiBWIDQ4IEggMzYgViA0MCBIIDI4IFYgMzIgSCAyMCBWIDI0IEggMTIgWiIgLz4KICA8Y2lyY2xlIGZpbGw9IiNmZjAwMDAiIGN4PSI0NCIgY3k9IjI0IiByPSI2IiAvPgo8L3N2Zz4=",
  "status": "active",
  "status_data": null,
  "subject": {
    "h": 20,
    "hidden": true,
    "id": "player",
    "image": "snake_head",
    "name": "Player",
    "r": 0,
    "subject": true,
    "w": 20,
    "x": 320,
    "y": 240,
    "z": 1
  },
  "objects": {
    "background": {
      "h": 480,
      "hidden": false,
      "id": "background",
      "image": "background",
      "name": "Background",
      "r": 0,
      "w": 640,
      "x": 0,
      "y": 0,
      "z": 0
    }
  },
  "images": {
    "background": {
      "data": "PHN2ZyB3aWR0aD0iNjQwIiBoZWlnaHQ9IjQ4MCIgdmlld0JveD0iMCAwIDY0MCA0ODAiIHZlcnNpb249IjEuMSI+CiAgPHJlY3Qgc3R5bGU9ImZpbGw6IzAwMWEwMDtzdHJva2U6bm9uZSIgd2lkdGg9IjY0MCIgaGVpZ2h0PSI0ODAiIHg9IjAiIHk9IjAiIC8+Cjwvc3ZnPg==",
      "h": 0,
      "id": "background",
      "name": "background.svg",
      "w": 0
    },
    "food": {
      "data": "PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgdmVyc2lvbj0iMS4xIj4KICA8Y2lyY2xlIHN0eWxlPSJmaWxsOiNmZjAwMDA7c3Ryb2tlOiNhYTAwMDA7c3Ryb2tlLXdpZHRoOjEiIGN4PSIxMCIgY3k9IjEwIiByPSI4IiAvPgo8L3N2Zz4=",
      "h": 0,
      "id": "food",
      "name": "food.svg",
      "w": 0
    },
    "snake_body": {
      "data": "PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgdmVyc2lvbj0iMS4xIj4KICA8cmVjdCBzdHlsZT0iZmlsbDojMDBjYzAwO3N0cm9rZTojMDA4ODAwO3N0cm9rZS13aWR0aDoxIiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjEiIHk9IjEiIHJ4PSIyIiByeT0iMiIgLz4KPC9zdmc+",
      "h": 0,
      "id": "snake_body",
      "name": "snake_body.svg",
      "w": 0
    },
    "snake_head": {
      "data": "PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgdmVyc2lvbj0iMS4xIj4KICA8cmVjdCBzdHlsZT0iZmlsbDojMDBmZjAwO3N0cm9rZTojMDA4ODAwO3N0cm9rZS13aWR0aDoxIiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjEiIHk9IjEiIHJ4PSIyIiByeT0iMiIgLz4KICA8Y2lyY2xlIHN0eWxlPSJmaWxsOiMwMDAwMDAiIGN4PSI2IiBjeT0iNyIgcj0iMiIgLz4KICA8Y2lyY2xlIHN0eWxlPSJmaWxsOiMwMDAwMDAiIGN4PSIxNCIgY3k9IjciIHI9IjIiIC8+Cjwvc3ZnPg==",
      "h": 0,
      "id": "snake_head",
      "name": "snake_head.svg",
      "w": 0
    }
  },
  "script": "ZnVuY3Rpb24gVXBkYXRlKGdhbWUpCiAgICAtLSBJbml0aWFsaXplIGdhbWUKICAgIGlmIGdhbWUuc3ViamVjdC5kYXRhID09IG5pbCBvciBnYW1lLnN1YmplY3QuZGF0YS5zdGF0ZSA9PSBuaWwgdGhlbgogICAgICAgIEluaXRpYWxpemVHYW1lKGdhbWUpCiAgICBlbmQKICAgIAogICAgLS0gSGFuZGxlIGdhbWUgc3RhdGUKICAgIGlmIGdhbWUuc3ViamVjdC5kYXRhLnN0YXRlID09ICJzdGFydCIgdGhlbgogICAgICAgIC0tIERpc3BsYXkgIlByZXNzIFNwYWNlIHRvIFN0YXJ0IiBtZXNzYWdlCiAgICAgICAgaWYgSXNLZXlQcmVzc2VkKGdhbWUua2V5cywgMTE2KSB0aGVuIC0tIFNwYWNlCiAgICAgICAgICAgIGdhbWUuc3ViamVjdC5kYXRhLnN0YXRlID0gInBsYXlpbmciCiAgICAgICAgZW5kCiAgICBlbHNlaWYgZ2FtZS5zdWJqZWN0LmRhdGEuc3RhdGUgPT0gInBsYXlpbmciIHRoZW4KICAgICAgICAtLSBIYW5kbGUgZGlyZWN0aW9uIGNoYW5nZXMKICAgICAgICBIYW5kbGVJbnB1dChnYW1lKQogICAgICAgIAogICAgICAgIC0tIE9ubHkgdXBkYXRlIHNuYWtlIHBvc2l0aW9uIGF0IGNlcnRhaW4gaW50ZXJ2YWxzIGZvciBtb3ZlbWVudCB0aW1pbmcKICAgICAgICBnYW1lLnN1YmplY3QuZGF0YS5tb3ZlX3RpbWVyID0gZ2FtZS5zdWJqZWN0LmRhdGEubW92ZV90aW1lciArIDEKICAgICAgICBpZiBnYW1lLnN1YmplY3QuZGF0YS5tb3ZlX3RpbWVyID49IGdhbWUuc3ViamVjdC5kYXRhLm1vdmVfc3BlZWQgdGhlbgogICAgICAgICAgICBnYW1lLnN1YmplY3QuZGF0YS5tb3ZlX3RpbWVyID0gMAogICAgICAgICAgICAKICAgICAgICAgICAgLS0gU3RvcmUgcHJldmlvdXMgcG9zaXRpb24gZm9yIGVhY2ggc2VnbWVudCBiZWZvcmUgbW92aW5nCiAgICAgICAgICAgIGxvY2FsIHByZXZfcG9zaXRpb25zID0ge30KICAgICAgICAgICAgZm9yIGksIHNlZ21lbnRfaWQgaW4gcGFpcnMoZ2FtZS5zdWJqZWN0LmRhdGEuc25ha2Vfc2VnbWVudHMpIGRvCiAgICAgICAgICAgICAgICBsb2NhbCBzZWdtZW50ID0gZ2FtZS5vYmplY3RzW3NlZ21lbnRfaWRdCiAgICAgICAgICAgICAgICBwcmV2X3Bvc2l0aW9uc1tpXSA9IHt4ID0gc2VnbWVudC54LCB5ID0gc2VnbWVudC55fQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIE1vdmUgaGVhZCBiYXNlZCBvbiBkaXJlY3Rpb24KICAgICAgICAgICAgbG9jYWwgaGVhZF9pZCA9IGdhbWUuc3ViamVjdC5kYXRhLnNuYWtlX3NlZ21lbnRzWyIxIl0KICAgICAgICAgICAgbG9jYWwgaGVhZCA9IGdhbWUub2JqZWN0c1toZWFkX2lkXQogICAgICAgICAgICAKICAgICAgICAgICAgbG9jYWwgbmV3X3gsIG5ld195ID0gaGVhZC54LCBoZWFkLnkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIGdhbWUuc3ViamVjdC5kYXRhLmRpcmVjdGlvbiA9PSAidXAiIHRoZW4KICAgICAgICAgICAgICAgIG5ld195ID0gaGVhZC55IC0gZ2FtZS5zdWJqZWN0LmRhdGEuZ3JpZF9zaXplCiAgICAgICAgICAgIGVsc2VpZiBnYW1lLnN1YmplY3QuZGF0YS5kaXJlY3Rpb24gPT0gImRvd24iIHRoZW4KICAgICAgICAgICAgICAgIG5ld195ID0gaGVhZC55ICsgZ2FtZS5zdWJqZWN0LmRhdGEuZ3JpZF9zaXplCiAgICAgICAgICAgIGVsc2VpZiBnYW1lLnN1YmplY3QuZGF0YS5kaXJlY3Rpb24gPT0gImxlZnQiIHRoZW4KICAgICAgICAgICAgICAgIG5ld194ID0gaGVhZC54IC0gZ2FtZS5zdWJqZWN0LmRhdGEuZ3JpZF9zaXplCiAgICAgICAgICAgIGVsc2VpZiBnYW1lLnN1YmplY3QuZGF0YS5kaXJlY3Rpb24gPT0gInJpZ2h0IiB0aGVuCiAgICAgICAgICAgICAgICBuZXdfeCA9IGhlYWQueCArIGdhbWUuc3ViamVjdC5kYXRhLmdyaWRfc2l6ZQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgCiAgICAgICAgICAgIC0tIE1vdmUgaGVhZAogICAgICAgICAgICBoZWFkLnggPSBuZXdfeAogICAgICAgICAgICBoZWFkLnkgPSBuZXdfeQogICAgICAgICAgICAKICAgICAgICAgICAgLS0gQ2hlY2sgY29sbGlzaW9ucyBiZWZvcmUgbW92aW5nIGJvZHkKICAgICAgICAgICAgaWYgQ2hlY2tDb2xsaXNpb25zKGdhbWUsIGhlYWQpIHRoZW4KICAgICAgICAgICAgICAgIHJldHVybiBnYW1lCiAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgbG9jYWwgblNlZyA9IDAKCiAgICAgICAgICAgIGZvciBrLCB2IGluIHBhaXJzKGdhbWUuc3ViamVjdC5kYXRhLnNuYWtlX3NlZ21lbnRzKSBkbwogICAgICAgICAgICAgICAgblNlZyA9IG5TZWcgKyAxCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICAKICAgICAgICAgICAgLS0gTW92ZSBib2R5IHNlZ21lbnRzCiAgICAgICAgICAgIGZvciBpID0gMiwgblNlZyBkbwogICAgICAgICAgICAgICAgbG9jYWwgc2VnbWVudF9pZCA9IGdhbWUuc3ViamVjdC5kYXRhLnNuYWtlX3NlZ21lbnRzW3Rvc3RyaW5nKGkpXQogICAgICAgICAgICAgICAgZ2FtZS5vYmplY3RzW3NlZ21lbnRfaWRdLnggPSBwcmV2X3Bvc2l0aW9uc1t0b3N0cmluZyhpLTEpXS54CiAgICAgICAgICAgICAgICBnYW1lLm9iamVjdHNbc2VnbWVudF9pZF0ueSA9IHByZXZfcG9zaXRpb25zW3Rvc3RyaW5nKGktMSldLnkKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIAogICAgICAgICAgICAtLSBDaGVjayBpZiBzbmFrZSBlYXRzIGZvb2QKICAgICAgICAgICAgaWYgaGVhZC54ID09IGdhbWUub2JqZWN0cy5mb29kLnggYW5kIGhlYWQueSA9PSBnYW1lLm9iamVjdHMuZm9vZC55IHRoZW4KICAgICAgICAgICAgICAgIEVhdEZvb2QoZ2FtZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbHNlaWYgZ2FtZS5zdWJqZWN0LmRhdGEuc3RhdGUgPT0gImdhbWVvdmVyIiB0aGVuCiAgICAgICAgLS0gUmVzdGFydCBnYW1lIG9uIHNwYWNlIHByZXNzCiAgICAgICAgaWYgSXNLZXlQcmVzc2VkKGdhbWUua2V5cywgMTE2KSB0aGVuIC0tIFNwYWNlCiAgICAgICAgICAgIFJlc2V0R2FtZShnYW1lKQogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIHJldHVybiBnYW1lCmVuZAoKZnVuY3Rpb24gSW5pdGlhbGl6ZUdhbWUoZ2FtZSkKICAgIC0tIERlZmluZSBnYW1lIHNldHRpbmdzCiAgICBnYW1lLnN1YmplY3QuZGF0YSA9IHsKICAgICAgICBzdGF0ZSA9ICJzdGFydCIsCiAgICAgICAgc2NvcmUgPSAwLAogICAgICAgIGRpcmVjdGlvbiA9ICJyaWdodCIsCiAgICAgICAgbmV4dF9kaXJlY3Rpb24gPSAicmlnaHQiLCAtLSBCdWZmZXIgZm9yIG5leHQgZGlyZWN0aW9uIGNoYW5nZQogICAgICAgIG1vdmVfdGltZXIgPSAwLAogICAgICAgIG1vdmVfc3BlZWQgPSAxMCwgLS0gTG93ZXIgaXMgZmFzdGVyCiAgICAgICAgZ3JpZF9zaXplID0gMjAsCiAgICAgICAgc25ha2Vfc2VnbWVudHMgPSB7fSwKICAgICAgICBncm93dGhfcGVuZGluZyA9IDAKICAgIH0KICAgIAogICAgLS0gQ3JlYXRlIGluaXRpYWwgc25ha2UgKDMgc2VnbWVudHMpCiAgICBsb2NhbCBzdGFydF94ID0gMzIwIC0tIG1pZGRsZSBvZiBzY3JlZW4KICAgIGxvY2FsIHN0YXJ0X3kgPSAyNDAKICAgIAogICAgLS0gQ3JlYXRlIGhlYWQKICAgIGxvY2FsIGhlYWRfaWQgPSAic25ha2VfaGVhZCIKICAgIGdhbWUub2JqZWN0c1toZWFkX2lkXSA9IHsKICAgICAgICBpZCA9IGhlYWRfaWQsCiAgICAgICAgbmFtZSA9ICJTbmFrZSBIZWFkIiwKICAgICAgICBoaWRkZW4gPSBmYWxzZSwKICAgICAgICB4ID0gc3RhcnRfeCwKICAgICAgICB5ID0gc3RhcnRfeSwKICAgICAgICB6ID0gMiwKICAgICAgICB3ID0gZ2FtZS5zdWJqZWN0LmRhdGEuZ3JpZF9zaXplLAogICAgICAgIGggPSBnYW1lLnN1YmplY3QuZGF0YS5ncmlkX3NpemUsCiAgICAgICAgciA9IDAsCiAgICAgICAgaW1hZ2UgPSAic25ha2VfaGVhZCIsCiAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgdHlwZSA9ICJoZWFkIgogICAgICAgIH0KICAgIH0KICAgIGdhbWUuc3ViamVjdC5kYXRhLnNuYWtlX3NlZ21lbnRzWyIxIl0gPSBoZWFkX2lkCgogICAgLS0gQ3JlYXRlIGluaXRpYWwgYm9keSBzZWdtZW50cwogICAgZm9yIGkgPSAyLCAzIGRvCiAgICAgICAgbG9jYWwgc2VnbWVudF9pZCA9ICJzbmFrZV9ib2R5XyIgLi4gaQogICAgICAgIGdhbWUub2JqZWN0c1tzZWdtZW50X2lkXSA9IHsKICAgICAgICAgICAgaWQgPSBzZWdtZW50X2lkLAogICAgICAgICAgICBuYW1lID0gIlNuYWtlIEJvZHkiLAogICAgICAgICAgICBoaWRkZW4gPSBmYWxzZSwKICAgICAgICAgICAgeCA9IHN0YXJ0X3ggLSAoKGktMSkgKiBnYW1lLnN1YmplY3QuZGF0YS5ncmlkX3NpemUpLAogICAgICAgICAgICB5ID0gc3RhcnRfeSwKICAgICAgICAgICAgeiA9IDEsCiAgICAgICAgICAgIHcgPSBnYW1lLnN1YmplY3QuZGF0YS5ncmlkX3NpemUsCiAgICAgICAgICAgIGggPSBnYW1lLnN1YmplY3QuZGF0YS5ncmlkX3NpemUsCiAgICAgICAgICAgIHIgPSAwLAogICAgICAgICAgICBpbWFnZSA9ICJzbmFrZV9ib2R5IiwKICAgICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgICAgIHR5cGUgPSAiYm9keSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnYW1lLnN1YmplY3QuZGF0YS5zbmFrZV9zZWdtZW50c1t0b3N0cmluZyhpKV0gPSBzZWdtZW50X2lkCiAgICBlbmQKCiAgICAtLSBDcmVhdGUgZm9vZAogICAgZ2FtZS5vYmplY3RzLmZvb2QgPSB7CiAgICAgICAgaWQgPSAiZm9vZCIsCiAgICAgICAgbmFtZSA9ICJGb29kIiwKICAgICAgICBoaWRkZW4gPSBmYWxzZSwKICAgICAgICB4ID0gMCwKICAgICAgICB5ID0gMCwKICAgICAgICB6ID0gMSwKICAgICAgICB3ID0gZ2FtZS5zdWJqZWN0LmRhdGEuZ3JpZF9zaXplLAogICAgICAgIGggPSBnYW1lLnN1YmplY3QuZGF0YS5ncmlkX3NpemUsCiAgICAgICAgciA9IDAsCiAgICAgICAgaW1hZ2UgPSAiZm9vZCIsCiAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgdHlwZSA9ICJmb29kIgogICAgICAgIH0KICAgIH0KCiAgICAtLSBQbGFjZSBmb29kIGluIHJhbmRvbSBwb3NpdGlvbgogICAgUGxhY2VGb29kKGdhbWUpCmVuZAoKZnVuY3Rpb24gSGFuZGxlSW5wdXQoZ2FtZSkKICAgIC0tIEdldCBjdXJyZW50IGRpcmVjdGlvbgogICAgbG9jYWwgY3VycmVudF9kaXJlY3Rpb24gPSBnYW1lLnN1YmplY3QuZGF0YS5kaXJlY3Rpb24KICAgIAogICAgLS0gQ2hlY2sgZm9yIGRpcmVjdGlvbiBjaGFuZ2VzCiAgICBpZiBnYW1lLmtleXMgfj0gbmlsIHRoZW4KICAgICAgICBmb3IgXywgayBpbiBwYWlycyhnYW1lLmtleXMpIGRvCiAgICAgICAgICAgIGlmIChrID09IDIyIG9yIGsgPT0gMzEpIGFuZCBjdXJyZW50X2RpcmVjdGlvbiB+PSAiZG93biIgdGhlbiAtLSBXIG9yIFVwIEFycm93CiAgICAgICAgICAgICAgICBnYW1lLnN1YmplY3QuZGF0YS5uZXh0X2RpcmVjdGlvbiA9ICJ1cCIKICAgICAgICAgICAgZWxzZWlmIChrID09IDE4IG9yIGsgPT0gMjgpIGFuZCBjdXJyZW50X2RpcmVjdGlvbiB+PSAidXAiIHRoZW4gLS0gUyBvciBEb3duIEFycm93CiAgICAgICAgICAgICAgICBnYW1lLnN1YmplY3QuZGF0YS5uZXh0X2RpcmVjdGlvbiA9ICJkb3duIgogICAgICAgICAgICBlbHNlaWYgKGsgPT0gMCBvciBrID09IDI5KSBhbmQgY3VycmVudF9kaXJlY3Rpb24gfj0gInJpZ2h0IiB0aGVuIC0tIEEgb3IgTGVmdCBBcnJvdwogICAgICAgICAgICAgICAgZ2FtZS5zdWJqZWN0LmRhdGEubmV4dF9kaXJlY3Rpb24gPSAibGVmdCIKICAgICAgICAgICAgZWxzZWlmIChrID09IDMgb3IgayA9PSAzMCkgYW5kIGN1cnJlbnRfZGlyZWN0aW9uIH49ICJsZWZ0IiB0aGVuIC0tIEQgb3IgUmlnaHQgQXJyb3cKICAgICAgICAgICAgICAgIGdhbWUuc3ViamVjdC5kYXRhLm5leHRfZGlyZWN0aW9uID0gInJpZ2h0IgogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICAtLSBPbmx5IGFwcGx5IGRpcmVjdGlvbiBjaGFuZ2Ugd2hlbiBtb3ZlbWVudCBoYXBwZW5zCiAgICBpZiBnYW1lLnN1YmplY3QuZGF0YS5tb3ZlX3RpbWVyID09IDAgdGhlbgogICAgICAgIGdhbWUuc3ViamVjdC5kYXRhLmRpcmVjdGlvbiA9IGdhbWUuc3ViamVjdC5kYXRhLm5leHRfZGlyZWN0aW9uCiAgICBlbmQKZW5kCgpmdW5jdGlvbiBQbGFjZUZvb2QoZ2FtZSkKICAgIGxvY2FsIGdyaWRfc2l6ZSA9IGdhbWUuc3ViamVjdC5kYXRhLmdyaWRfc2l6ZQogICAgbG9jYWwgY29scyA9IG1hdGguZmxvb3IoNjQwIC8gZ3JpZF9zaXplKQogICAgbG9jYWwgcm93cyA9IG1hdGguZmxvb3IoNDgwIC8gZ3JpZF9zaXplKQogICAgCiAgICAtLSBLZWVwIHRyeWluZyByYW5kb20gcG9zaXRpb25zIHVudGlsIHdlIGZpbmQgb25lIG5vdCBvY2N1cGllZCBieSBzbmFrZQogICAgbG9jYWwgdmFsaWRfcG9zaXRpb24gPSBmYWxzZQogICAgbG9jYWwgZm9vZF94LCBmb29kX3kKICAgIAogICAgd2hpbGUgbm90IHZhbGlkX3Bvc2l0aW9uIGRvCiAgICAgICAgZm9vZF94ID0gbWF0aC5mbG9vcihtYXRoLnJhbmRvbSgwLCBjb2xzIC0gMSkpICogZ3JpZF9zaXplCiAgICAgICAgZm9vZF95ID0gbWF0aC5mbG9vcihtYXRoLnJhbmRvbSgwLCByb3dzIC0gMSkpICogZ3JpZF9zaXplCiAgICAgICAgCiAgICAgICAgdmFsaWRfcG9zaXRpb24gPSB0cnVlCiAgICAgICAgLS0gQ2hlY2sgaWYgcG9zaXRpb24gb3ZlcmxhcHMgd2l0aCBhbnkgc25ha2Ugc2VnbWVudAogICAgICAgIGZvciBfLCBzZWdtZW50X2lkIGluIHBhaXJzKGdhbWUuc3ViamVjdC5kYXRhLnNuYWtlX3NlZ21lbnRzKSBkbwogICAgICAgICAgICBsb2NhbCBzZWdtZW50ID0gZ2FtZS5vYmplY3RzW3NlZ21lbnRfaWRdCiAgICAgICAgICAgIGlmIHNlZ21lbnQueCA9PSBmb29kX3ggYW5kIHNlZ21lbnQueSA9PSBmb29kX3kgdGhlbgogICAgICAgICAgICAgICAgdmFsaWRfcG9zaXRpb24gPSBmYWxzZQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQKICAgIAogICAgZ2FtZS5vYmplY3RzLmZvb2QueCA9IGZvb2RfeAogICAgZ2FtZS5vYmplY3RzLmZvb2QueSA9IGZvb2RfeQplbmQKCmZ1bmN0aW9uIEVhdEZvb2QoZ2FtZSkKICAgIC0tIEluY3JlYXNlIHNjb3JlCiAgICBnYW1lLnN1YmplY3QuZGF0YS5zY29yZSA9IGdhbWUuc3ViamVjdC5kYXRhLnNjb3JlICsgMTAKICAgIAogICAgLS0gQWRkIGdyb3d0aCBmbGFnCiAgICBnYW1lLnN1YmplY3QuZGF0YS5ncm93dGhfcGVuZGluZyA9IGdhbWUuc3ViamVjdC5kYXRhLmdyb3d0aF9wZW5kaW5nICsgMQogICAgCiAgICAtLSBQbGFjZSBuZXcgZm9vZAogICAgUGxhY2VGb29kKGdhbWUpCiAgICAKICAgIGxvY2FsIG5TZWcgPSAwCiAgICBmb3IgaywgdiBpbiBwYWlycyhnYW1lLnN1YmplY3QuZGF0YS5zbmFrZV9zZWdtZW50cykgZG8KICAgICAgICBuU2VnID0gblNlZyArIDEKICAgIGVuZAogICAgCiAgIC0tIEFkZCBuZXcgc2VnbWVudAogICAgbG9jYWwgbGFzdF9zZWdtZW50X2lkID0gZ2FtZS5zdWJqZWN0LmRhdGEuc25ha2Vfc2VnbWVudHNbdG9zdHJpbmcoblNlZyldCiAgICBwcmludChnYW1lLnN1YmplY3QuZGF0YS5zbmFrZV9zZWdtZW50cykKICAgIGxvY2FsIGxhc3Rfc2VnbWVudCA9IGdhbWUub2JqZWN0c1tsYXN0X3NlZ21lbnRfaWRdCiAgICBwcmludChsYXN0X3NlZ21lbnQpCgogICAgbG9jYWwgbmV3X3NlZ21lbnRfaWQgPSAic25ha2VfYm9keV8iIC4uICh0b3N0cmluZyhuU2VnICsgMSkpCiAgICBnYW1lLm9iamVjdHNbbmV3X3NlZ21lbnRfaWRdID0gewogICAgICAgIGlkID0gbmV3X3NlZ21lbnRfaWQsCiAgICAgICAgbmFtZSA9ICJTbmFrZSBCb2R5IiwKICAgICAgICBoaWRkZW4gPSBmYWxzZSwKICAgICAgICB4ID0gbGFzdF9zZWdtZW50LngsCiAgICAgICAgeSA9IGxhc3Rfc2VnbWVudC55ICwKICAgICAgICB6ID0gMSwKICAgICAgICB3ID0gZ2FtZS5zdWJqZWN0LmRhdGEuZ3JpZF9zaXplLAogICAgICAgIGggPSBnYW1lLnN1YmplY3QuZGF0YS5ncmlkX3NpemUsCiAgICAgICAgciA9IDAsCiAgICAgICAgaW1hZ2UgPSAic25ha2VfYm9keSIsCiAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgdHlwZSA9ICJib2R5IgogICAgICAgIH0KICAgIH0KCiAgICBsb2NhbCBuU2VnID0gMAogICAgZm9yIGssIHYgaW4gcGFpcnMoZ2FtZS5zdWJqZWN0LmRhdGEuc25ha2Vfc2VnbWVudHMpIGRvCiAgICAgICAgblNlZyA9IG5TZWcgKyAxCiAgICBlbmQKCiAgICBnYW1lLnN1YmplY3QuZGF0YS5zbmFrZV9zZWdtZW50c1t0b3N0cmluZyhuU2VnICsgMSldID0gbmV3X3NlZ21lbnRfaWQKICAgIAogICAgLS0gSW5jcmVhc2Ugc3BlZWQgc2xpZ2h0bHkgYXMgc25ha2UgZ3Jvd3MKICAgIGlmIGdhbWUuc3ViamVjdC5kYXRhLm1vdmVfc3BlZWQgPiA0IHRoZW4KICAgICAgICBnYW1lLnN1YmplY3QuZGF0YS5tb3ZlX3NwZWVkID0gbWF0aC5tYXgoNCwgZ2FtZS5zdWJqZWN0LmRhdGEubW92ZV9zcGVlZCAtIDAuNSkKICAgIGVuZAplbmQKCmZ1bmN0aW9uIENoZWNrQ29sbGlzaW9ucyhnYW1lLCBoZWFkKQogICAgLS0gQ2hlY2sgd2FsbCBjb2xsaXNpb24KICAgIGlmIGhlYWQueCA8IDAgb3IgaGVhZC54ID49IDY0MCBvciBoZWFkLnkgPCAwIG9yIGhlYWQueSA+PSA0ODAgdGhlbgogICAgICAgIGdhbWUuc3ViamVjdC5kYXRhLnN0YXRlID0gImdhbWVvdmVyIgogICAgICAgIHJldHVybiB0cnVlCiAgICBlbmQKICAgIAogICAgLS0gQ2hlY2sgc2VsZiBjb2xsaXNpb24gKHNraXAgaGVhZCkKCiAgICBsb2NhbCBuU2VnID0gMAogICAgZm9yIGssIHYgaW4gcGFpcnMoZ2FtZS5zdWJqZWN0LmRhdGEuc25ha2Vfc2VnbWVudHMpIGRvCiAgICAgICAgblNlZyA9IG5TZWcgKyAxCiAgICBlbmQKCiAgICBmb3IgaSA9IDIsIG5TZWcgZG8KICAgICAgICBsb2NhbCBzZWdtZW50X2lkID0gZ2FtZS5zdWJqZWN0LmRhdGEuc25ha2Vfc2VnbWVudHNbdG9zdHJpbmcoaSldCiAgICAgICAgbG9jYWwgc2VnbWVudCA9IGdhbWUub2JqZWN0c1tzZWdtZW50X2lkXQogICAgICAgIAogICAgICAgIGlmIGhlYWQueCA9PSBzZWdtZW50LnggYW5kIGhlYWQueSA9PSBzZWdtZW50LnkgdGhlbgogICAgICAgICAgICBnYW1lLnN1YmplY3QuZGF0YS5zdGF0ZSA9ICJnYW1lb3ZlciIKICAgICAgICAgICAgcmV0dXJuIHRydWUKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICByZXR1cm4gZmFsc2UKZW5kCgpmdW5jdGlvbiBSZXNldEdhbWUoZ2FtZSkKICAgIC0tIFJlbW92ZSBhbGwgc25ha2Ugc2VnbWVudHMKICAgIGZvciBfLCBzZWdtZW50X2lkIGluIHBhaXJzKGdhbWUuc3ViamVjdC5kYXRhLnNuYWtlX3NlZ21lbnRzKSBkbwogICAgICAgIGdhbWUub2JqZWN0c1tzZWdtZW50X2lkXSA9IG5pbAogICAgZW5kCgogICAgZ2FtZS5zdWJqZWN0LmRhdGEuc25ha2Vfc2VnbWVudHMgPSB7fQogICAgCiAgICAtLSBSZWluaXRpYWxpemUgdGhlIGdhbWUKICAgIEluaXRpYWxpemVHYW1lKGdhbWUpCmVuZAoKZnVuY3Rpb24gSXNLZXlQcmVzc2VkKGtleXMsIGtleUNvZGUpCiAgICBpZiBrZXlzID09IG5pbCB0aGVuIHJldHVybiBmYWxzZSBlbmQKICAgIAogICAgZm9yIF8sIGsgaW4gcGFpcnMoa2V5cykgZG8KICAgICAgICBpZiBrID09IGtleUNvZGUgdGhlbgogICAgICAgICAgICByZXR1cm4gdHJ1ZQogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIHJldHVybiBmYWxzZQplbmQK",
  "source": "app",
  "tags": null,
  "created_at": 1743258716,
  "created_by": "admin",
  "updated_at": 1743258918,
  "updated_by": "admin"
}
